<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Plan Nutrición y Rutinas Semanal</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    color: #fff;
    margin: 0; padding: 20px;
  }
  h1 {
    text-align: center;
    margin-bottom: 15px;
  }
  label, select, input, textarea {
    display: block;
    margin: 8px 0;
    width: 100%;
    max-width: 400px;
    padding: 8px;
    border-radius: 5px;
    border: none;
  }
  button {
    padding: 10px 15px;
    border: none;
    background-color: #ff6f61;
    color: white;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 10px;
  }
  button:hover {
    background-color: #e65b50;
  }
  #resultado {
    margin-top: 20px;
    background: rgba(0,0,0,0.4);
    border-radius: 10px;
    padding: 15px;
    overflow-x: auto;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    color: #000;
    background: #fff;
    border-radius: 8px;
    overflow: hidden;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
  }
  th {
    background-color: #2575fc;
    color: white;
  }
</style>
</head>
<body>

<h1>Plan Nutrición y Rutinas Semanal</h1>

<label>Edad:</label>
<input type="number" id="age" min="5" max="120" />

<label>Peso (kg):</label>
<input type="number" id="weight" min="20" max="300" step="0.1" />

<label>Estatura (cm):</label>
<input type="number" id="height" min="50" max="250" />

<label>Sexo:</label>
<select id="sex">
  <option value="hombre">Hombre</option>
  <option value="mujer">Mujer</option>
</select>

<label>Condiciones (alergias separadas por coma):</label>
<textarea id="allergies" placeholder="Ejemplo: maní, leche, gluten"></textarea>

<label>Objetivo:</label>
<select id="goal">
  <option value="bajar">Bajar de peso</option>
  <option value="subir">Subir masa muscular</option>
  <option value="mantener">Mantenerme saludable</option>
</select>

<label>Deporte principal:</label>
<select id="sportType">
  <option value="ninguno">Ejercicio general</option>
  <option value="futbol">Fútbol</option>
  <option value="basquetbol">Basquetbol</option>
  <option value="pesas">Pesas</option>
  <option value="natacion">Natación</option>
  <option value="correr">Correr</option>
  <option value="otro">Otro</option>
</select>

<label>Presupuesto diario para alimentación (MXN):</label>
<input type="number" id="budget" min="10" max="1000" step="1" placeholder="Ejemplo: 150" />

<label>Alimentos que no te gustan (separados por coma):</label>
<textarea id="dislikedFoods" placeholder="Ejemplo: huevo, pescado"></textarea>

<button onclick="generarPlan()">Generar Plan Semanal</button>
<button onclick="reiniciar()">Reiniciar</button>

<div id="resultado"></div>

<script>
// Listas de comidas con precio aproximado (en pesos MXN)
const desayunos = [
  { nombre: "Avena con fruta", precio: 20 },
  { nombre: "Huevos revueltos con tortilla", precio: 25 },
  { nombre: "Yogur con granola", precio: 30 },
  { nombre: "Smoothie de plátano y leche", precio: 18 },
  { nombre: "Pan integral con aguacate", precio: 28 }
];

const comidas = [
  { nombre: "Pechuga de pollo con arroz y verduras", precio: 50 },
  { nombre: "Ensalada de atún", precio: 45 },
  { nombre: "Tacos de carne asada (3)", precio: 55 },
  { nombre: "Sopa de verduras con pollo", precio: 40 },
  { nombre: "Pasta integral con salsa de tomate", precio: 48 }
];

const cenas = [
  { nombre: "Ensalada verde con huevo", precio: 35 },
  { nombre: "Quesadillas de pollo", precio: 40 },
  { nombre: "Verduras al vapor con pescado", precio: 45 },
  { nombre: "Tortilla de espinacas", precio: 30 },
  { nombre: "Sándwich integral de pavo", precio: 38 }
];

// Rutinas para 5 días (por músculo) + extras para variar (30 rutinas)
const rutinasMusculo = {
  pecho: [
    "Press de banca 4x10",
    "Fondos en paralelas 3x12",
    "Aperturas con mancuernas 3x12",
    "Press inclinado 3x10",
    "Flexiones 3x15"
  ],
  espalda: [
    "Dominadas 4x8",
    "Remo con barra 4x10",
    "Pullover 3x12",
    "Jalones al pecho 3x10",
    "Peso muerto 3x8"
  ],
  pierna: [
    "Sentadillas 4x12",
    "Prensa de pierna 3x10",
    "Zancadas 3x12",
    "Curl femoral 3x12",
    "Elevación de talones 3x15"
  ],
  hombros: [
    "Press militar 4x10",
    "Elevaciones laterales 3x12",
    "Remo al mentón 3x10",
    "Elevaciones frontales 3x12",
    "Pájaros 3x15"
  ],
  brazo: [
    "Curl de bíceps 4x12",
    "Extensión de tríceps 4x12",
    "Curl martillo 3x12",
    "Fondos para tríceps 3x15",
    "Curl concentrado 3x10"
  ]
};

// Aquí podrías agregar 30 rutinas extra para variar (ejemplo con una para pecho, luego se puede ampliar)
const rutinasExtras = {
  pecho: [
    "Press de banca con mancuernas 4x10",
    "Aperturas en banco inclinado 3x12",
    "Press declinado 3x10",
    "Cruces en polea 3x15",
    "Flexiones con palmada 3x12"
  ],
  // Agrega para los demás músculos igual si quieres más variedad...
  // ...
};

// Función para filtrar comidas por presupuesto y alergias, y que no estén en alimentos que no gustan
function filtrarComidas(lista, presupuesto, alergias, noGustan) {
  return lista.filter(item => {
    const nombreMinus = item.nombre.toLowerCase();
    // Revisar alergias y alimentos no gustados
    for (const alergia of alergias) {
      if (alergia && nombreMinus.includes(alergia.trim().toLowerCase())) return false;
    }
    for (const disgusto of noGustan) {
      if (disgusto && nombreMinus.includes(disgusto.trim().toLowerCase())) return false;
    }
    // Revisar precio contra presupuesto
    return item.precio <= presupuesto;
  });
}

// Función para elegir una comida al azar de la lista filtrada
function elegirComida(lista) {
  if (lista.length === 0) return "No hay opciones disponibles con tu presupuesto y preferencias";
  const idx = Math.floor(Math.random() * lista.length);
  return lista[idx].nombre;
}

// Generar plan semanal
function generarPlan() {
  const age = document.getElementById("age").value;
  const weight = document.getElementById("weight").value;
  const height = document.getElementById("height").value;
  const sex = document.getElementById("sex").value;
  const goal = document.getElementById("goal").value;
  const sportType = document.getElementById("sportType").value;
  const budget = parseFloat(document.getElementById("budget").value);
  const allergiesInput = document.getElementById("allergies").value;
  const dislikedInput = document.getElementById("dislikedFoods").value;

  if (!age || !weight || !height || !budget) {
    alert("Por favor completa Edad, Peso, Estatura y Presupuesto.");
    return;
  }

  // Preparar arrays de alergias y disgustos
  const alergias = allergiesInput ? allergiesInput.split(",") : [];
  const noGustan = dislikedInput ? dislikedInput.split(",") : [];

  // Presupuesto dividido en 3 comidas (simplificado)
  const presupuestoPorComida = budget / 3;

  // Filtrar comidas según presupuesto y alergias/disgustos
  const desayunoOpciones = filtrarComidas(desayunos, presupuestoPorComida, alergias, noGustan);
  const comidaOpciones = filtrarComidas(comidas, presupuestoPorComida, alergias, noGustan);
  const cenaOpciones = filtrarComidas(cenas, presupuestoPorComida, alergias, noGustan);

  // Elegir comidas al azar
  const desayuno = elegirComida(desayunoOpciones);
  const comida = elegirComida(comidaOpciones);
  const cena = elegirComida(cenaOpciones);

  // Crear plan de ejercicios para 5 días con músculos
  const diasSemana = ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes"];
  const musculos = ["pecho", "espalda", "pierna", "hombros", "brazo"];
  // Usaremos rutinasMusculo para simplificar. Podrías combinar rutinasExtras para variar.
  
  let tabla = `<table><thead><tr><th>Día</th><th>Músculo</th><th>Rutina</th></tr></thead><tbody>`;

  for (let i = 0; i < 5; i++) {
    const musculo = musculos[i];
    const rutina = rutinasMusculo[musculo];
    tabla += `<tr>
      <td>${diasSemana[i]}</td>
      <td style="text-transform: capitalize;">${musculo}</td>
      <td><ul>`;
    rutina.forEach(ejercicio => {
      tabla += `<li>${ejercicio}</li>`;
    });
    tabla += `</ul></td></tr>`;
  }
  tabla += "</tbody></table>";

  // Mostrar resultado completo
  const textoPlan = `
  <h2>Plan semanal personalizado</h2>
  <p><b>Edad:</b> ${age} años | <b>Peso:</b> ${weight} kg | <b>Estatura:</b> ${height} cm | <b>Sexo:</b> ${sex} | <b>Objetivo:</b> ${goal}</p>
  <p><b>Presupuesto diario para comida:</b> $${budget.toFixed(2)} MXN</p>
  <p><b>Alergias:</b> ${alergias.length ? alergias.join(", ") : "Ninguna"}</p>
  <p><b>Alimentos que no te gustan:</b> ${noGustan.length ? noGustan.join(", ") : "Ninguno"}</p>

  <h3>Plan de alimentación diario (ajustado a tu presupuesto):</h3>
  <ul>
    <li><b>Desayuno:</b> ${desayuno}</li>
    <li><b>Comida:</b> ${comida}</li>
    <li><b>Cena:</b> ${cena}</li>
  </ul>

  ${tabla}
  `;

  document.getElementById("resultado").innerHTML = textoPlan;
}

function reiniciar() {
  document.getElementById("age").value = "";
  document.getElementById("weight").value = "";
  document.getElementById("height").value = "";
  document.getElementById("sex").value = "hombre";
  document.getElementById("goal").value = "bajar";
  document.getElementById("sportType").value = "ninguno";
  document.getElementById("budget").value = "";
  document.getElementById("allergies").value = "";
  document.getElementById("dislikedFoods").value = "";
  document.getElementById("resultado").innerHTML = "";
}
</script>

</body>
</html>
